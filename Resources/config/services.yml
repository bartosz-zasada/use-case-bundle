parameters:
    lamudi_use_case.container.class: Lamudi\UseCaseBundle\Container\UseCaseContainer
    lamudi_use_case.request.resolver.class: Lamudi\UseCaseBundle\Factory\RequestResolver

    lamudi_angi_client.default_input_type: default
    lamudi_angi_client.default_input_options: []
    lamudi_angi_client.default_output_type: default
    lamudi_angi_client.default_output_options: []

services:
    lamudi_use_case.container:
        class: "%lamudi_use_case.container.class%"
        arguments: ["@annotations.reader", "@lamudi_use_case.request.resolver"]
        calls:
            - ["setDefaultInputConverter", ["%lamudi_angi_client.default_input_type%", "%lamudi_angi_client.default_input_options%"]]
            - ["setDefaultResponseProcessor", ["%lamudi_angi_client.default_output_type%", "%lamudi_angi_client.default_output_options%"]]

    lamudi_use_case.request.resolver:
        class: "%lamudi_use_case.request.resolver.class%"

    lamudi_use_case.form_input_converter:
        class: Lamudi\UseCaseBundle\Request\Converter\FormInputConverter
        arguments: ["@form.factory"]
        tags:
            - { name: use_case_input_converter, alias: form }

    lamudi_use_case.converter.http_input_converter:
        class: Lamudi\UseCaseBundle\Request\Converter\HttpInputConverter
        tags:
            - { name: use_case_input_converter, alias: http }

    lamudi_use_case.converter.json_body_input_converter:
        class: Lamudi\UseCaseBundle\Request\Converter\JsonBodyInputConverter
        arguments: ["@serializer.encoder.json"]
        tags:
            - { name: use_case_input_converter, alias: json }


    lamudi_use_case.processor.twig_response_processor:
        class: Lamudi\UseCaseBundle\Response\Processor\TwigRenderer
        arguments: ["@templating"]
        calls:
            - ["setFormFactory", ["@form.factory"]]
        tags:
            - { name: use_case_response_processor, alias: twig }

    app.use_case.json_response_processor:
        class: Lamudi\UseCaseBundle\Response\Processor\JsonRenderer
        arguments: ["@serializer.encoder.json"]
        tags:
            - { name: use_case_response_processor, alias: json }
